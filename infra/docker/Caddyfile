{$DOMAIN:egouda.xyz} {
    # All traffic goes to frontend
    # Backend is internal only (localhost:8000) - not exposed publicly
    reverse_proxy localhost:3000

    log {
        output file /var/log/caddy/access.log
    }

    header {
        -Server
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        Referrer-Policy strict-origin-when-cross-origin
        X-XSS-Protection "1; mode=block"
    }
}

# www redirect
www.{$DOMAIN:egouda.xyz} {
    redir https://{$DOMAIN:egouda.xyz}{uri} permanent
}
